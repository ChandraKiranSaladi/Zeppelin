<!DOCTYPE html>
<html lang="en">

<!-- Basic -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Mobile Metas -->
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">

<!-- Site Metas -->
<title>Zepplin - Dynamic Bus Routes</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="">

<!-- Site Icons -->
<link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="../images/apple-touch-icon.png">

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="../stylesheets/css/bootstrap.min.css">
<!-- Site CSS -->
<link rel="stylesheet" href="../stylesheets/style.css">
<!-- Responsive CSS -->
<link rel="stylesheet" href="../stylesheets/css/responsive.css">
<!-- Custom CSS -->
<link rel="stylesheet" href="../stylesheets/css/custom.css">
<script src="../js/modernizr.js"></script> <!-- Modernizr -->

<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body id="page-top" class="politics_version" onload="getLocation()">



    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
        <div class="container">
            <a class="navbar-brand js-scroll-trigger" href="/">
                <img class="img-fluid" src="../images/logo.png" alt="" />
            </a>
            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive"
                aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                Menu
                <i class="fa fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav text-uppercase ml-auto">
                    <li class="nav-item">
                        <a class="nav-link js-scroll-trigger active" href="/" style="color:#F6A526;">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link js-scroll-trigger" href="optimize" style="color:#F6A526;">About Us</a>
                    </li>
                    <!-- <li class="nav-item">
                        <a class="nav-link js-scroll-trigger" href="#services" style="color:#F6A526;">Features</a>
                    </li> -->
                    <!-- <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#portfolio">Portfolio</a>
            </li>
			<li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#blog">Blog</a>
            </li>
			<li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#team">Our Team</a>
            </li>
			<li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#pricing">Pricing</a>
            </li> -->
                    <!-- <li class="nav-item">
                        <a class="nav-link js-scroll-trigger" href="#contact">Contact Us</a>
                    </li> -->
                </ul>
            </div>
        </div>
    </nav>
    <div class="section wb">
        <br />
        <br />
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <div class="message-box">
                        <div style='text-align:center;'>
                            <script type="text/javascript" src="../js/state.js"></script>
                            Select State (with cities): <select id="country" name="country"></select> <br /><br />
                            Select City: <select name="state" id="state"></select> <br /> <br />
                            Number of Bookings: <input id="bookings" type="number" value="1" min="1" style="width:50px;">
                            <a class="get_btn hvr-bounce-to-top">Reserve</a>
                            <!-- Total Cost: <div id="cost"></div> -->
                            <hr />
                        </div>

                        <script language="javascript">
                            populateCountries("country", "state"); // first parameter is id of country drop-down and second parameter is id of state drop-down
                            populateCountries("country2");
                            populateCountries("country2");
                        </script>
                        <div>
                            <div id="destn"></div>
                            <div id="time"></div>
                            <div id="disclaimer"></div>
                        </div>
                    </div><!-- end messagebox -->
                </div><!-- end col -->

                <div class="col-md-6">
                    <div class="right-box-pro wow fadeIn">
                        <div id="mapholder"></div>

                        <script>
                            var x = document.getElementById("demo");

                            function getLocation() {
                                if (navigator.geolocation) {
                                    navigator.geolocation.getCurrentPosition(showPosition, showError);
                                } else {
                                    x.innerHTML = "Geolocation is not supported by this browser.";
                                }
                            }

                            function showPosition(position) {
                                var latlon = position.coords.latitude + "," + position.coords.longitude;
                                var img_url = "https://maps.googleapis.com/maps/api/staticmap?center="
                                    + latlon + "&zoom=14&size=600x450&key=AIzaSyAiotsKNVBO32IKBBfLkyJX10FfQqwLXys";
                                document.getElementById("mapholder").innerHTML = "<img src='" + img_url + "'>";
                            }
                            //To use this code on your website, get a free API key from Google.
                            //Read more at: https://www.w3schools.com/graphics/google_maps_basic.asp

                            function showError(error) {
                                switch (error.code) {
                                    case error.PERMISSION_DENIED:
                                        x.innerHTML = "User denied the request for Geolocation."
                                        break;
                                    case error.POSITION_UNAVAILABLE:
                                        x.innerHTML = "Location information is unavailable."
                                        break;
                                    case error.TIMEOUT:
                                        x.innerHTML = "The request to get user location timed out."
                                        break;
                                    case error.UNKNOWN_ERROR:
                                        x.innerHTML = "An unknown error occurred."
                                        break;
                                }
                            }
                        </script>



                    </div><!-- end media -->
                </div><!-- end col -->
            </div><!-- end row -->
        </div><!-- end container -->
    </div><!-- end section -->
    <div id="reciept" class="section wb">

        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <div class="message-box">





                    </div><!-- end messagebox -->
                </div><!-- end col -->


            </div><!-- end row -->
        </div><!-- end container -->
    </div>

    <div class="copyrights">
        <div class="container">
            <div class="footer-distributed">
                <a href="#"><img src="../images/logo.png" alt="" /></a>
                <div class="footer-center">
                    <p class="footer-links">
                        <a href="#">Home</a>
                        <a href="#">Blog</a>
                        <a href="#">Pricing</a>
                        <a href="#">About</a>
                        <a href="#">Faq</a>
                        <a href="#">Contact</a>
                    </p>
                    <p class="footer-company-name">All Rights Reserved. &copy; 2018 <a href="#">OnNext</a> Design By :
                        <a href="https://html.design/">html design</a></p>
                </div>
            </div>
        </div><!-- end container -->
    </div><!-- end copyrights -->

    <a href="#" id="scroll-to-top" class="dmtop global-radius"><i class="fa fa-angle-up"></i></a>

    <!-- ALL JS FILES -->
    <script src="../js/all.js"></script>
    <!-- Camera Slider -->
    <script src="../js/jquery.mobile.customized.min.js"></script>
    <script src="../js/jquery.easing.1.3.js"></script>
    <script src="../js/parallaxie.js"></script>
    <script src="../js/headline.js"></script>
    <!-- Contact form JavaScript -->
    <script src="../js/jqBootstrapValidation.js"></script>
    <script src="../js/contact_me.js"></script>
    <!-- ALL PLUGINS -->
    <script src="../js/custom.js"></script>
    <script src="../js/jquery.vide.js"></script>
    <script>
        var data = localStorage.getItem("event");

        function getDateTime() {
            return data.dateTime;
        }

        function getDest() {
            return data.destn;
        }
        function getStatenCity() {
            return {
                state: data.state,
                city: data.city
            };

        }
        function getName() {
            return data.name;
        }


    </script>
    <script>
        var eventDetails = {};
        $.ajax({
            url: "http://localhost:8080/api/eventSearchApi/?string=" + localStorage.eventName,
            type: "GET",
            dataType: "json",
            success: function (data) {
                eventDetails = data.items[0];
                console.log(eventDetails + " " + data.bookingCount);
                $('#destn').html("Destination: " + eventDetails.destn);
                $('#time').html("Date and Time: " + new Date(eventDetails.dateTime));
                var bookin_needed = data.bookingCount ? (25 - data.bookingCount) : 25;
                $("#disclaimer").html("Disclaimer: This ride needs " + bookin_needed + " more bookings to be confirmed.");
            }
        });
    </script>
</body>

</html>